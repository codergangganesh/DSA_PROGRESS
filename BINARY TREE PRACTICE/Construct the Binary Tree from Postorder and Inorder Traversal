class Solution {
    public TreeNode build(int[] postorder , int ps,int pe,int[] inorder,int is,int ie,HashMap<Integer,Integer> imap){
        if (ps>pe || is>ie) return null;
        int val = postorder[pe];
        TreeNode root = new TreeNode(val);
        int x = imap.get(val);
        int nr = ie - x;
        root.right = build(postorder,pe-nr,pe-1 ,inorder,x+1,ie,imap);
        root.left = build(postorder ,ps,pe-nr-1 ,inorder,is,x-1,imap);
        return root;
    }
    public TreeNode buildTree(int[] inorder, int[] postorder) {
        HashMap<Integer,Integer> inmap = new HashMap<>();
        for (int i = 0;i<inorder.length;i++)
            inmap.put(inorder[i],i);
        return build(postorder,0,postorder.length-1,inorder,0,inorder.length-1,inmap);
        
    }
}